<html>

<head>
  <style>
    #mapid{
      height:700px;
      width:700px;
    }
  </style>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.3/dist/leaflet.css" integrity="sha512-Rksm5RenBEKSKFjgI3a41vrjkw4EVPlJ3+OiI65vTjIdo9brlAacEuKOiQ5OFh7cOI1bkDwLqdLw3Zg0cRJAAQ=="
    crossorigin="" />

  <script src="https://unpkg.com/leaflet@1.3.3/dist/leaflet.js" integrity="sha512-tAGcCfR4Sc5ZP5ZoVz0quoZDYX5aCtEm/eu1KhSLj2c9eFrylXZknQYmxUssFaVJKvvc0dJQixhGjG2yXWiV9Q=="
    crossorigin=""></script>
  <script src='https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.10/lodash.js'></script>
  <script src="Simplified_County_Boundaries.js"></script>
  <script src="https://www.gstatic.com/firebasejs/5.3.0/firebase.js"></script>
  <script src="https://unpkg.com/@mapbox/leaflet-pip@latest/leaflet-pip.js"></script>
  <script src='dataObjects/countyClass.js'></script>
  <script src='dataObjects/vermontObject.js'></script>
  <script src='townPolygons.js'></script>

</head>

<body>
  <div id="bagsDiv"></div>
  <div id="teamsDiv"></div>
  <div id="profilesDiv"></div>
  <div id="mapid"></div>





  <script>
    
    //these are the variables that point to useful numbers
    let totalBagsDropped;
    let totalTeams;
    let totalProfiles;

    // Initialize Firebase
    var config = {
      apiKey: "AIzaSyAjwSCpOvLPgYcFr26V3gmfwJlGb-VtWAs",
      authDomain: "greenupvermont-de02b.firebaseapp.com",
      databaseURL: "https://greenupvermont-de02b.firebaseio.com",
      projectId: "greenupvermont-de02b",
      storageBucket: "greenupvermont-de02b.appspot.com",
      messagingSenderId: "439621369113"
    };
    const email = "WillyNillyLoman@gmail.com"
    const password = "burlingtonCA"

    firebase.initializeApp(config);
    var database = firebase.database();

    firebase.auth().signInWithEmailAndPassword(email, password).catch(function (error) {
      // ToDo: handle Errors here.
      var errorCode = error.code;
      var errorMessage = error.message;
      // ...
    });
    let vermont = new Vermont
    

 var mymap = L.map('mapid').setView([44.0423, -72.6034], 8);
    L.tileLayer('https://cartodb-basemaps-{s}.global.ssl.fastly.net/rastertiles/voyager/{z}/{x}/{y}{r}.png', {
	attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> &copy; <a href="http://cartodb.com/attributions">CartoDB</a>',
	subdomains: 'abcd',
	maxZoom: 19,
    id: 'mapbox.streets',
}).addTo(mymap);

//The beginnings of a function that makes the choropleth.
let counties =countyPolygons.features
for (county in counties) {
  counties[county].properties.bagCount = bagCountOf(county)
}
let countyBoundaries = L.geoJSON(countyPolygons);
countyBoundaries.addTo(mymap)

//ToDo: write a function in data structure to calculate total bag drops per county. Call it to get bag count for chloropleth.
function bagCountOf(county) {
  
} 

// each of the counties in countyBoundaries already has a bounding box, addisons is at the variable below.
// this would make zooming easy when we get around to that.
mymap.fitBounds(countyBoundaries._layers['51']._bounds)

  </script>

</body>

</html>